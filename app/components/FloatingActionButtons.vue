<template>
  <!-- PCç«¯ï¼šå¤šä¸ªç‹¬ç«‹æ‚¬æµ®æŒ‰é’® -->
  <div class="hidden md:flex fixed bottom-4 right-4 z-50 flex-row gap-3">
    <!-- æ¢é™©æŒ‰é’® -->
    <button
      @click="openExploration"
      class="floating-action-btn"
      title="å‰å¾€å„åœ°æ¢é™©å¯»å®"
    >
      <span class="btn-icon">ğŸ—ºï¸</span>
      <span class="btn-text">æ¢é™©</span>
    </button>

    <!-- æ—¶å…‰æ³•å®æŒ‰é’® -->
    <button
      @click="openTimeTreasure"
      class="floating-action-btn"
      title="è£…å¤‡æ³•å®æå‡ä¿®ç‚¼æ•ˆç‡"
    >
      <span class="btn-icon">â°</span>
      <span class="btn-text">æ³•å®</span>
    </button>

    <!-- æ‚Ÿé“æŒ‰é’® -->
    <button
      @click="openEnlightenment"
      class="floating-action-btn"
      title="æ„Ÿæ‚Ÿå¤©åœ°ä¹‹é“ï¼Œæå‡å±æ€§"
    >
      <span class="btn-icon">ğŸ§˜</span>
      <span class="btn-text">æ‚Ÿé“</span>
    </button>

    <!-- ç¥é€šæŒ‰é’® -->
    <button
      @click="openDivinePower"
      class="floating-action-btn"
      title="ä¿®ç‚¼ç¥é€šï¼Œå¼ºåŒ–èº«ä½“å±æ€§"
    >
      <span class="btn-icon">âœ¨</span>
      <span class="btn-text">ç¥é€š</span>
    </button>

    <!-- å‚¨ç‰©æˆ’æŒ‰é’® -->
    <button
      @click="openStorageRing"
      class="floating-action-btn"
      title="ç®¡ç†èƒŒåŒ…ç‰©å“ï¼Œä½¿ç”¨æ¶ˆè€—å“"
    >
      <span class="btn-icon">ğŸ’</span>
      <span class="btn-text">å‚¨ç‰©æˆ’</span>
    </button>
  </div>

  <!-- ç§»åŠ¨ç«¯ï¼šå•ä¸ªæ‚¬æµ®æŒ‰é’®å’ŒåŠŸèƒ½èœå• -->
  <div class="md:hidden fixed bottom-4 right-4 z-50">
    <button
      @click="showFunctionMenu = true"
      class="w-14 h-14 bg-blue-500 hover:bg-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center"
      title="åŠŸèƒ½èœå•"
    >
      <span class="text-2xl">âš™ï¸</span>
    </button>
  </div>

  <!-- ç§»åŠ¨ç«¯åŠŸèƒ½é€‰æ‹©å¯¹è¯æ¡† -->
  <div
    v-if="showFunctionMenu"
    class="md:hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
    @click.self="closeFunctionMenu"
  >
    <div class="bg-paper-100 rounded-lg shadow-xl max-w-md w-full">
      <!-- å¯¹è¯æ¡†å¤´éƒ¨ -->
      <div class="flex justify-between items-center p-4 border-b border-ink-300">
        <h2 class="text-xl font-serif font-semibold text-ink-800">åŠŸèƒ½èœå•</h2>
        <button
          @click="closeFunctionMenu"
          class="text-ink-600 hover:text-ink-800 text-2xl leading-none"
        >
          Ã—
        </button>
      </div>

      <!-- åŠŸèƒ½æŒ‰é’®åˆ—è¡¨ -->
      <div class="p-4 space-y-3">
        <!-- æ¢é™©æŒ‰é’® -->
        <button
          @click="openExploration"
          class="w-full flex items-center space-x-3 p-4 bg-emerald-50 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors"
        >
          <span class="text-2xl">ğŸ—ºï¸</span>
          <div class="text-left">
            <div class="font-medium text-ink-800">æ¢é™©</div>
            <div class="text-sm text-ink-600">å‰å¾€å„åœ°æ¢é™©å¯»å®</div>
          </div>
        </button>

        <!-- æ—¶å…‰æ³•å®æŒ‰é’® -->
        <button
          @click="openTimeTreasure"
          class="w-full flex items-center space-x-3 p-4 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors"
        >
          <span class="text-2xl">â°</span>
          <div class="text-left">
            <div class="font-medium text-ink-800">æ—¶å…‰æ³•å®</div>
            <div class="text-sm text-ink-600">è£…å¤‡æ³•å®æå‡ä¿®ç‚¼æ•ˆç‡</div>
          </div>
        </button>

        <!-- æ‚Ÿé“æŒ‰é’® -->
        <button
          @click="openEnlightenment"
          class="w-full flex items-center space-x-3 p-4 bg-amber-50 border border-amber-200 rounded-lg hover:bg-amber-100 transition-colors"
        >
          <span class="text-2xl">ğŸ§˜</span>
          <div class="text-left">
            <div class="font-medium text-ink-800">æ‚Ÿé“</div>
            <div class="text-sm text-ink-600">æ„Ÿæ‚Ÿå¤©åœ°ä¹‹é“ï¼Œæå‡å±æ€§</div>
          </div>
        </button>

        <!-- ç¥é€šæŒ‰é’® -->
        <button
          @click="openDivinePower"
          class="w-full flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors"
        >
          <span class="text-2xl">âœ¨</span>
          <div class="text-left">
            <div class="font-medium text-ink-800">ç¥é€š</div>
            <div class="text-sm text-ink-600">ä¿®ç‚¼ç¥é€šï¼Œå¼ºåŒ–èº«ä½“å±æ€§</div>
          </div>
        </button>

        <!-- å‚¨ç‰©æˆ’æŒ‰é’® -->
        <button
          @click="openStorageRing"
          class="w-full flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors"
        >
          <span class="text-2xl">ğŸ’</span>
          <div class="text-left">
            <div class="font-medium text-ink-800">å‚¨ç‰©æˆ’</div>
            <div class="text-sm text-ink-600">ç®¡ç†èƒŒåŒ…ç‰©å“ï¼Œä½¿ç”¨æ¶ˆè€—å“</div>
          </div>
        </button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
// Emits
interface Emits {
  (e: 'openExploration'): void
  (e: 'openTimeTreasure'): void
  (e: 'openEnlightenment'): void
  (e: 'openDivinePower'): void
  (e: 'openStorageRing'): void
}

const emit = defineEmits<Emits>()

// çŠ¶æ€
const showFunctionMenu = ref(false)

// å…³é—­åŠŸèƒ½èœå•
function closeFunctionMenu() {
  showFunctionMenu.value = false
}

// æ‰“å¼€æ¢é™©
function openExploration() {
  emit('openExploration')
  closeFunctionMenu()
}

// æ‰“å¼€æ—¶å…‰æ³•å®
function openTimeTreasure() {
  emit('openTimeTreasure')
  closeFunctionMenu()
}

// æ‰“å¼€æ‚Ÿé“
function openEnlightenment() {
  emit('openEnlightenment')
  closeFunctionMenu()
}

// æ‰“å¼€ç¥é€š
function openDivinePower() {
  emit('openDivinePower')
  closeFunctionMenu()
}

// æ‰“å¼€å‚¨ç‰©æˆ’
function openStorageRing() {
  emit('openStorageRing')
  closeFunctionMenu()
}
</script>

<style scoped>
/* PCç«¯æ‚¬æµ®æŒ‰é’®æ ·å¼ */
.floating-action-btn {
  @apply transition-all duration-200 flex flex-col items-center justify-center text-center;
  width: 80px;
  height: 80px;
  min-width: 80px;
  min-height: 80px;
  padding: 8px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  background: transparent;
  color: #374151;
}

.btn-icon {
  font-size: 2.5rem;
  line-height: 1;
  margin-bottom: 6px;
  display: block;
}

.btn-text {
  font-size: 0.875rem;
  font-weight: 600;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1;
  display: block;
  color: #4b5563;
}

/* æŒ‰é’®æ‚¬åœæ•ˆæœ */
.floating-action-btn:hover {
  transform: translateY(-4px) scale(1.1);
}

.floating-action-btn:hover .btn-icon {
  transform: scale(1.1);
}

.floating-action-btn:hover .btn-text {
  color: #1f2937;
  font-weight: 700;
}

.floating-action-btn:active {
  transform: translateY(-2px) scale(1.05);
}

/* å“åº”å¼è®¾è®¡ - ç¡®ä¿åœ¨è¾ƒå°çš„æ¡Œé¢å±å¹•ä¸Šä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤º */
@media (max-width: 1200px) {
  .floating-action-btn {
    width: 72px;
    height: 72px;
    min-width: 72px;
    min-height: 72px;
    padding: 6px;
  }
  
  .btn-icon {
    font-size: 2.25rem;
    margin-bottom: 5px;
  }
  
  .btn-text {
    font-size: 0.8rem;
  }
}

/* ä¸­ç­‰å±å¹•è°ƒæ•´ */
@media (max-width: 900px) {
  .floating-action-btn {
    width: 64px;
    height: 64px;
    min-width: 64px;
    min-height: 64px;
    padding: 5px;
  }
  
  .btn-icon {
    font-size: 2rem;
    margin-bottom: 4px;
  }
  
  .btn-text {
    font-size: 0.75rem;
  }
}
</style>
